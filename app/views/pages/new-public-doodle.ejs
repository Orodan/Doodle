<!doctype html>
<html lang="fr">
<head>
    <% include ../partials/head %>
</head>
<body class="container">
    <div class="row">
        <div class="col-sm-6 col-md-6 col-md-offset-3">

            <!-- PUBLIC DOODLE FORM -->
            <form action="#" method="post">
                <div id="doodle-name-description">
                    <div class="jumbotron text-center">
                        <h1><span class="fa fa-money"></span> <%= __('Doodle') %></h1>
                        <br/>

                        <div class="form-group">
                            <input type="text" name="name" placeholder="<%= __('Name') %>" class="form-control">
                        </div>
                        <div class="form-group">
                            <textarea type="textarea" name="description" placeholder="<%= __('description') %>" class="form-control"></textarea>
                        </div>

                        <button id="btn-doodle-name-description" class="btn btn-default"><%= __('Next') %></button>
                    </div>
                </div>

                <!-- Schedules -->
                <div class="hidden" id="doodle-schedules">
                    <div class="jumbotron text-center">
                        <h1><span class="fa fa-money"></span> Doodle</h1>

                        <p><%= __('Choose the schedules') %></p><br/>

                        <% if (typeof message != 'undefined' && message.length > 0) { %>
                        <div class="col-sm-6 col-sm-offset-3 alert alert-info" role="alert">
                            <%= message %>
                        </div>
                        <% } %>

                            <div class="form-horizontal">
                                <div id="public-schedules">
                                    <div class="form-group">
                                        <div class="col-sm-10 col-sm-offset-1">
                                            <div class='input-group date' id='datetimepicker1'>
                                                <input type='text' class="form-control" name="schedules[0][begin_date]" placeholder="<%= __('Begin date'); %>"/>
                                                <span class="input-group-addon">
                                                    <span class="glyphicon glyphicon-calendar"></span>
                                                </span>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <div class="col-sm-10 col-sm-offset-1">
                                            <div class='input-group date' id='datetimepicker2'>
                                                <input type='text' class="form-control" name="schedules[0][end_date]" placeholder="<%= __('End date'); %>"/>
                                                <span class="input-group-addon">
                                                    <span class="glyphicon glyphicon-calendar"></span>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <br/>
                            </div>

                            <button class="btn btn-primary" id="add-schedule"><%= __('Add schedule') %></button>
                            <br/><br/>

                            <button id="btn-previous" class="btn btn-default"><%= __('Previous') %></button>
                            <button type="submit" class="btn btn-default"><%= __('Submit') %></button>
                    </div>
                </div>
            </form>

        </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script type="text/javascript" src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="/js/moment.js"></script>
    <script type="text/javascript" src="/js/bootstrap-datetimepicker.min.js"></script>
    <script type="text/javascript" src="/js/fr.js"></script>
    <script type="text/javascript" src="/js/script.js"></script>

    <script type="text/javascript">
        $(function () {
            $('#datetimepicker1').datetimepicker({

            });

            $('#datetimepicker2').datetimepicker({

            });
        });

        var nbInputs = 1;
        var nbDatePicker = 3;

        $('#add-schedule').click(function (e) {
            // Stock the redirection
            e.preventDefault();

            // Show inputs date fields
            var inputs = 	'<div class="form-group"> \
                                <div class="col-sm-10 col-sm-offset-1"> \
                                    <div class="input-group date" id="datetimepicker' + nbDatePicker + '"> \
                                        <input type="text" class="form-control" name="schedules[' + nbInputs + '][begin_date]" placeholder="<%= __("Begin date"); %>" /> \
                                        <span class="input-group-addon"> \
                                            <span class="glyphicon glyphicon-calendar"></span> \
                                        </span> \
                                    </div> \
                                </div> \
                            </div> \
                            \
                            <div class="form-group"> \
                                <div class="col-sm-10 col-sm-offset-1"> \
                                    <div class="input-group date" id="datetimepicker' + (nbDatePicker + 1) + '"> \
                                        <input type="text" class="form-control" name="schedules[' + nbInputs + '][end_date]" placeholder="<%= __("End date"); %>" /> \
                                        <span class="input-group-addon"> \
                                            <span class="glyphicon glyphicon-calendar"></span> \
                                        </span> \
                                    </div> \
                                </div> \
                            </div>';

            $('#public-schedules').append(inputs);

            for(var i = nbDatePicker; i < nbDatePicker + 2; i++) {

                $('#datetimepicker' + i).datetimepicker({

                });
            }

            nbInputs++;
            nbDatePicker += 2;
        });
    </script>
</body>
</html>