<!doctype html>
<html lang="fr">
<head>
    <meta charset="utf-8">
    <title>Doodle</title>

    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css"> <!-- load bootstrap css -->

    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css">  <!-- load fontawesome -->

    <link rel="stylesheet" href="/css/style.css">  

    <style>
        body { padding-top: 80px; }
    </style>
</head>
<body>
    <div class="container">

        <nav class="navbar navbar-default">
            <div class="container-fluid">
                <div class="navbar-header">
                    <a class="navbar-brand" href="/profile">Doodle</a>
                </div>
                <div>
                    <ul class="nav navbar-nav">
                        <li><a href='<%= doodle.id %>/add-public-user'><%= __('Add user') %></a></li>
                        <% if (statut == 'administrator') { %>
                            <li><a href='<%= doodle.id %>/remove-public-user'><%= __('Remove user') %></a></li>
                            <li><a href='<%= doodle.id %>/remove-public-doodle'><%= __('Remove doodle') %></a></li>
                        <% } %>
                    </ul>
                </div>
            </div>
        </nav>

        <% if (message.length > 0) { %>
            <div class="col-sm-6 col-sm-offset-3 alert alert-info" role="alert">
                <%= message %>
            </div>
        <% } %>

        <!-- DOODLE DATA -->
        <% if (doodle) { %>
        <div class="col-md-12 jumbotron table-responsive horiz-scroll">
            <table class="table table-condensed">
                <thead>
                    <!-- Display date (day, month, year) -->
                    <tr>
                        <th></th>
                        <% for (var key in doodle.schedules) { %>
                            <% if ( doodle.schedules[key].begin_date.toDateString() === doodle.schedules[key].end_date.toDateString() ) { %>
                                <th colspan=2 class="col-md-2" scope="col"><%= doodle.schedules[key].begin_date.toDateString() %></th>
                            <% } else { %>
                                <th class="col-md-1" scope="col"><%= doodle.schedules[key].begin_date.toDateString() %></th>
                                <th class="col-md-1" scope="col"><%= doodle.schedules[key].end_date.toDateString() %></th>
                            <% } %>
                        <% } %>
                    </tr>
                    <!-- Display schedule (minute, hour) -->
                    <tr>
                        <th></th>
                        <% for (var key in doodle.schedules) { %>
                                <th class="col-md-2" scope="col"><%= doodle.schedules[key].begin_date.toTimeString() %> </th>
                                <th class="col-md-2" scope="col"><%= doodle.schedules[key].end_date.toTimeString() %> </th> 
                        <% } %>
                    </tr>
                </thead>
                <tbody>
                    <% for (var key in doodle.users) { %>
                        <tr>
                            <td class="vert-align" scope="row"><%= doodle.users[key].first_name %> <%= doodle.users[key].last_name %></td>
                            <% for ( var key2 in doodle.users[key].votes ) { %>
                                <% if ( doodle.users[key].votes[key2].vote == -1 ) { %>
                                        <td colspan=2 class="smal"><div class="alert alert-danger vert-align"><span class="fa fa-frown-o"></span> <%= __('Not available') %></div></td>
                                    <% } %>
                                    <% if ( doodle.users[key].votes[key2].vote == 0 ) { %>
                                        <td colspan=2 class="smal"><div class="alert alert-warning vert-align"><span class="fa fa-meh-o"></span> <%= __('Do not know') %></div></td>
                                    <% } %>
                                    <% if ( doodle.users[key].votes[key2].vote == 1 ) { %>
                                        <td colspan=2 class="smal"><div class="alert alert-success vert-align"><span class="fa fa-smile-o"></span> <%= __('Available') %></div></td>
                                    <% } %>
                            <% } %>
                        </tr>
                    <% } %>
                </tbody>
            </table>
        </div>
        <% } %>

    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script type="text/javascript" src="/js/script.js"></script>
</body>
</html>